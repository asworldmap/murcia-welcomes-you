<div class="container" style="padding-top: var(--space-6);">
    <div style="text-align: center; margin-bottom: var(--space-8);">
        <h1 style="font-size: 3.5rem; margin-bottom: var(--space-2);">All Activities</h1>
        <p style="color: var(--text-soft); font-size: 1.1rem;">Explore the community catalog. Find your tribe.</p>
    </div>

    <!-- Search and Filters -->
    <div style="display: flex; flex-wrap: wrap; gap: var(--space-3); margin-bottom: var(--space-6);">
        <div style="flex: 1; min-width: 280px;">
            <input type="text" id="searchInput" placeholder="Search activities..."
                style="padding-left: var(--space-4);">
        </div>
        <select id="typeFilter" style="width: auto;">
            <option value="all">All Types</option>
            <option value="Outdoor">Outdoor</option>
            <option value="Fitness">Fitness</option>
            <option value="Dance">Dance</option>
            <option value="Tech">Tech</option>
            <option value="Social">Social</option>
        </select>
    </div>

    <!-- Activities Grid -->
    <div class="grid" id="activitiesGrid">
        <% activities.forEach(activity=> { %>
            <div class="card activity-card" data-category="<%= activity.category %>"
                data-name="<%= activity.name.toLowerCase() %>">
                <div
                    style="display: flex; justify-content: space-between; align-items: start; margin-bottom: var(--space-3);">
                    <span style="font-size: 3rem;">
                        <%= activity.emoji %>
                    </span>
                    <% if (activity.recurrence==='weekly' ) { %>
                        <span class="badge badge-success">Weekly Recurring</span>
                        <% } %>
                </div>

                <h3 style="font-size: 1.5rem; margin-bottom: var(--space-1);">
                    <%= activity.name %>
                </h3>
                <p
                    style="font-size: 0.9rem; color: var(--primary); font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: var(--space-3);">
                    <%= activity.tagline %>
                </p>

                <p
                    style="font-size: 0.95rem; color: var(--text-soft); margin-bottom: var(--space-4); display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 3;">
                    <%= activity.description %>
                </p>

                <div
                    style="background: var(--bg-soft); padding: var(--space-3); border-radius: var(--radius-sm); margin-bottom: var(--space-4);">
                    <% if (activity.nextSession) { %>
                        <p style="font-size: 0.85rem; font-weight: 600; color: var(--text-main);">
                            Next Session: <span style="color: var(--primary);">
                                <%= activity.nextSession.date %> @ <%= activity.nextSession.time %>
                            </span>
                        </p>
                        <% } else { %>
                            <p style="font-size: 0.85rem; font-weight: 600; color: var(--text-muted);">
                                Check calendar for next dates
                            </p>
                            <% } %>
                </div>

                <div style="display: flex; gap: var(--space-2);">
                    <a href="/activities/<%= activity.slug %>" class="btn" style="flex: 1;">View Activity</a>
                    <% if (activity.nextSession) { %>
                        <a href="/event/<%= activity.nextSession.id %>" class="btn btn-soft" style="flex: 1;">Quick
                            Register</a>
                        <% } %>
                </div>
            </div>
            <% }) %>
    </div>
</div>

<script>
    const searchInput = document.getElementById('searchInput');
    const typeFilter = document.getElementById('typeFilter');
    const cards = document.querySelectorAll('.activity-card');

    function filterCards() {
        const query = searchInput.value.toLowerCase();
        const type = typeFilter.value;

        cards.forEach(card => {
            const matchesSearch = card.dataset.name.includes(query);
            const matchesType = type === 'all' || card.dataset.category === type;

            if (matchesSearch && matchesType) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }

    searchInput.addEventListener('input', filterCards);
    typeFilter.addEventListener('change', filterCards);
</script>