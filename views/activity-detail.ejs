<div class="container" style="padding-top: 100px;">
    <div class="card" style="max-width: 900px; margin: 0 auto; padding: 50px; position: relative; overflow: hidden;">
        <a href="/calendar" style="text-decoration: none; color: var(--primary); font-weight: 700;">â† <%=
                t('nav_calendar') %></a>

        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 30px;">
            <div>
                <h1 style="color: var(--primary); margin-bottom: 20px;">
                    <%= activity.title %>
                </h1>
                <p style="font-size: 1.1rem; color: var(--text-light); margin-bottom: 30px;">
                    <%= activity.description %>
                </p>

                <p><strong>ğŸ•’ <%= t('nav_calendar') %>:</strong>
                    <%= activity.time %>
                </p>
                <p><strong>ğŸ“ Location:</strong>
                    <%= activity.location %>
                </p>

                <!-- Who's Coming Section -->
                <div style="margin-top: 40px;">
                    <h3>
                        <%= t('rsvp_title') %> (<%= participants.length %>)
                    </h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                        <% if (participants.length===0) { %>
                            <p style="font-style: italic; opacity: 0.6;">Be the first to join!</p>
                            <% } else { %>
                                <% participants.forEach(p=> { %>
                                    <div class="avatar-badge" title="<%= p.name %>"
                                        style="width: 45px; height: 45px; background: var(--naif-yellow); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-left: -10px;">
                                        <%= p.avatar %>
                                    </div>
                                    <% }) %>
                                        <% } %>
                    </div>
                </div>
            </div>

            <div id="rsvp-section"
                style="background: var(--naif-mint); padding: 30px; border-radius: 30px; border: 2px dashed var(--primary);">
                <h3 style="margin-bottom: 20px; text-align: center;">
                    <%= t('rsvp_btn') %>
                </h3>
                <form action="/rsvp" method="POST">
                    <input type="hidden" name="activitySlug" value="<%= activity.slug %>">
                    <div class="form-group">
                        <label>
                            <%= t('rsvp_placeholder') %>
                        </label>
                        <input type="text" name="name" required placeholder="Juana de Arco">
                    </div>
                    <div class="form-group">
                        <label>Choose your mood (Avatar)</label>
                        <select name="avatar" style="font-size: 1.5rem; padding: 5px;">
                            <option value="ğŸ˜Š">ğŸ˜Š Happy</option>
                            <option value="ğŸ˜">ğŸ˜ Cool</option>
                            <option value="ğŸ•">ğŸ• Foodie</option>
                            <option value="ğŸ’ƒ">ğŸ’ƒ Ready to Dance</option>
                            <option value="ğŸ§ ">ğŸ§  Techie</option>
                            <option value="ğŸ‘Ÿ">ğŸ‘Ÿ Sporty</option>
                        </select>
                    </div>
                    <button type="submit" class="btn" style="width: 100%;">
                        <%= t('rsvp_btn') %>
                    </button>
                </form>
                <p style="font-size: 0.8rem; margin-top: 15px; text-align: center; opacity: 0.7;">Reserving helps us
                    with logistics! No payment required for this reservation.</p>
            </div>
        </div>
    </div>
</div>

<style>
    .avatar-badge:first-child {
        margin-left: 0;
    }
</style>